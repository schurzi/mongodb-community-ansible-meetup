---
- hosts: localhost
  vars:
    mongo_user: user
    mongo_password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      61656462666562343338636665623632333439373065623330366538363362636631323439353565
      3063666537643762373665316438383162663535636638320a636338353039613536633332656333
      33663330356438303166633933393630353163343362326261396539386265663631333539633438
      3439623263343939650a613135313264356562326435343763656466633866303165623134616233
      61363533613530313762343765313338663637613136333261306137323539663563
  tasks:
    - name: Gather information about databases and their total size
      community.mongodb.mongodb_info:
        login_host: free-cluster-shard-00-01.hqzn3.mongodb.net
        login_user: "{{ mongo_user }}"
        login_password: "{{ mongo_password }}"
        filter: databases, total_size
